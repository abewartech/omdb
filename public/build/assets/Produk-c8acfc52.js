import{r as i,j as l,a as e,H as N,e as d}from"./app-f5a35749.js";import{A as S}from"./AuthenticatedLayout-cce9a80c.js";import{u as E,B as r,M as P,a as h,L as p,E as K,D as A,b as F,c as I,T as n}from"./Edit-12a64cbe.js";import"./ApplicationLogo-e8f394f8.js";import"./transition-a799b737.js";import"./MoreVert-4091ed50.js";const M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function B(s){const[f,g]=i.useState(!1),[b,c]=i.useState(!1),[k,x]=i.useState([]),a=E({initialValues:{id:null,name:"",code:"",kategori:"",foto:""},onSubmit:o=>{f?d.post("/api/editproduk",o).then(t=>{t.data.success&&window.location.reload()}):d.post("/api/produk",o).then(t=>{t.data.success&&window.location.reload()})}}),u=()=>c(!0),m=()=>c(!1),v=i.useMemo(()=>[{accessorKey:"kode",header:"Kode"},{accessorKey:"name",header:"Name"},{accessorKey:"id_kategori",header:"Kategori"},{accessorKey:"foto",header:"Foto"}],[]);i.useEffect(()=>{s.data&&x(s.data)});const C=(o,t)=>{o(),u(),a.setFieldValue("id",t.original.id),a.setFieldValue("name",t.original.name),g(!0)},w=(o,t)=>{o(),d.delete(`/api/produk/${t.original.id}`).then(y=>{y.data.success&&window.location.reload()})};return l(S,{auth:s.auth,errors:s.errors,children:[e(N,{title:"produk"}),l("div",{className:"py-12",children:[e("div",{className:"flex flex-row-reverse",children:e("div",{className:"basis-1/5 mb-5",children:e(r,{variant:"contained",onClick:u,children:"Add Produk"})})}),e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e(P,{columns:v,data:k,enableRowActions:!0,muiTablePaginationProps:{rowsPerPageOptions:[5,10,15]},initialState:{pagination:{pageSize:5}},renderRowActionMenuItems:({closeMenu:o,row:t})=>[l(h,{onClick:()=>{C(o,t)},sx:{m:0},children:[e(p,{children:e(K,{})}),"Edit"]},0),l(h,{onClick:()=>{w(o,t)},sx:{m:0},children:[e(p,{children:e(A,{})}),"Delete"]},0)]})})})]}),e(F,{open:b,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:l(I,{sx:M,component:"form",noValidate:!0,autoComplete:"off",onSubmit:a.handleSubmit,children:[e("input",{type:"hidden",name:"id",value:a.values.id}),e(n,{required:!0,label:"Name",name:"name",fullWidth:!0,onChange:a.handleChange,value:a.values.name,className:"my-5"}),e(n,{required:!0,label:"code",name:"code",fullWidth:!0,onChange:a.handleChange,value:a.values.code,className:"my-5"}),e(n,{required:!0,label:"kategori",name:"kategori",fullWidth:!0,onChange:a.handleChange,value:a.values.kategori,className:"my-5"}),e(n,{required:!0,label:"foto",name:"foto",fullWidth:!0,onChange:a.handleChange,value:a.values.foto,className:"my-5"}),e(r,{type:"submit",children:"Submit"}),e(r,{onClick:m,children:"Cancel"})]})})]})}export{B as default};
